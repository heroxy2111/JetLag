@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

:root{
  --primary:#2c3e50;
  --accent:#e74c3c;
  --bg:#f7f7fb;
  --light:#ecf0f1;
  --mid:#bdc3c7;
  --dark:#7f8c8d;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto;
  color:var(--primary);
  background:var(--bg);
  overflow:hidden;
}

#app-container{display:flex;height:100%;width:100%}
#map{flex:1;background:var(--light)}

#controls-panel{
  width:360px;max-width:90vw;
  background:#fff;padding:20px;overflow:auto;
  box-shadow:2px 0 10px rgba(0,0,0,.08);
  display:flex;flex-direction:column;gap:14px;z-index:1000;
}

header{text-align:center;padding-bottom:14px;border-bottom:1px solid var(--light)}
header h1{font-weight:900;letter-spacing:-1px;font-size:32px}
header h1 span{color:var(--accent)}
header h2{font-weight:600;color:var(--dark);text-transform:uppercase;font-size:12px;letter-spacing:.12em;margin-top:6px}

.control-section{margin-top:4px}
.control-section h3{font-size:16px;margin:6px 0 8px}
.control-section h4{font-size:12px;color:var(--dark);text-transform:uppercase;margin:14px 0 6px;letter-spacing:.08em}

.input-group-wrapper{position:relative}
.input-group{display:flex;gap:6px}
#area-input{
  flex:1;border:1px solid var(--mid);border-radius:6px;padding:10px 12px;font-size:14px
}
#add-area-btn{white-space:nowrap}

#autocomplete-results{
  position:absolute;left:0;right:0;top:100%;
  background:#fff;border:1px solid var(--mid);border-top:none;border-radius:0 0 8px 8px;
  max-height:220px;overflow:auto;z-index:1001
}
#autocomplete-results div{padding:10px 12px;cursor:pointer;font-size:14px}
#autocomplete-results div:hover{background:var(--light)}

#area-list{list-style:none;margin:8px 0 0;padding:0;display:flex;flex-direction:column;gap:6px}
#area-list li{
  background:var(--light);border-radius:6px;padding:8px 10px;
  display:flex;align-items:center;justify-content:space-between;gap:8px
}
.remove-area{border:none;background:transparent;color:var(--accent);font-weight:900;font-size:20px;cursor:pointer}

.checkbox-group label{display:flex;gap:8px;align-items:center;padding:6px;border-radius:6px;cursor:pointer}
.checkbox-group label:hover{background:var(--light)}
.checkbox-group input{margin-right:2px}

.legend-actions{display:flex;gap:6px;margin-bottom:8px}
#legend-select-all,#legend-select-none{
  background:#eee;color:#333;border-radius:6px;border:1px solid #ddd;padding:6px 10px;font-weight:700
}
#legend-select-all:hover,#legend-select-none:hover{background:#e6e6e6}

#line-legend{border:1px solid var(--light);border-radius:6px;padding:8px;max-height:220px;overflow:auto}
#line-legend .legend-item{display:flex;align-items:center;gap:8px;}
.line-color-swatch{width:16px;height:4px;border-radius:2px;display:inline-block}

button{
  border:none;border-radius:8px;background:var(--accent);
  color:#fff;padding:10px 14px;font-weight:800;cursor:pointer;transition:.15s
}
button:hover{filter:brightness(.92)}
button:disabled{background:var(--mid);cursor:not-allowed}
#export-map-btn{background:var(--accent)}
#export-map-btn:hover{filter:brightness(.93)}

#game-info{background:var(--light);border-radius:8px;padding:10px;text-align:center;font-size:14px}

#loader{display:flex;flex-direction:column;align-items:center;gap:10px;color:var(--dark)}
.spinner{width:40px;height:40px;border-radius:50%;border:4px solid #f3f3f3;border-top:4px solid var(--accent);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

.hidden{display:none !important}

/* Inline labels for line names */
/* Gemeinsamer Stil für Linien-Labels (Größe passt sich dem Text an) */
.line-label {
  --line-color: #ff6600;
  --text-color: #000;

  display: inline-block;
  background: var(--line-color);
  color: var(--text-color);

  border: 1px solid var(--line-color);
  border-radius: 4px;
  box-shadow: 0 1px 4px rgba(0,0,0,.25);

  font-size: 12px;
  font-weight: 800;
  white-space: nowrap;
  line-height: 1;
  padding: 3px 6px;

  pointer-events: none;
}

/* Leaflet panes order for crisp draw */
.leaflet-pane.linesPane{z-index:400}
.leaflet-pane.stationsPane{z-index:401}

/* POIs */
/* Container für Marker (Größe kommt von iconSize des divIcon) */
.emoji-pin {
  position: relative;
  width: 32px;   /* entspricht iconSize[0] */
  height: 44px;  /* entspricht iconSize[1] */
  pointer-events: auto;
}

/* Runder Kopf */
.emoji-pin .emoji-bubble {
  position: absolute;
  top: 0;
  left: 0;
  width: 32px;
  height: 32px;           /* gleich hoch/breit -> wirklich rund */
  border-radius: 50%;
  background: #fff;
  border: 2px solid var(--pin-color, #8b5a2b);
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Spitze (an den runden Kopf "angedockt") */
.emoji-pin .emoji-bubble::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -12px; /* ragt in den unteren Containerbereich */
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 12px solid var(--pin-color, #8b5a2b);
  filter: drop-shadow(0 1px 1px rgba(0,0,0,.2));
}

/* Emoji im Kopf */
.emoji-pin .emoji {
  font-size: 18px;
  line-height: 1;
}

/* Optionale Farbcodierung per CSS-Variable (bequemer als viele Klassen) */
.pin-park         { --pin-color: #22c55e; }
.pin-museum       { --pin-color: #a16207; }
.pin-library      { --pin-color: #f59e0b; }
.pin-hospital     { --pin-color: #f43f5e; }
.pin-airport      { --pin-color: #0ea5e9; }
.pin-embassy      { --pin-color: #8b5cf6; }
.pin-cinema       { --pin-color: #6b7280; }
.pin-aquarium     { --pin-color: #3b82f6; }
.pin-amusement_park { --pin-color: #ef4444; }
.pin-golf         { --pin-color: #10b981; }
.pin-zoo          { --pin-color: #d97706; }

